<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <!-- JQuery (used for bootstrap and jekyll search) -->
    <script src="/assets/js/jquery-3.2.1.min.js" ></script>
    
    <!-- Main JS (navbar.js and katex_init.js)-->
    <script defer=true src="/assets/js/main.min.js"></script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">

    <!--Favicon-->
    <link rel="shortcut icon" href="/assets/img/xtext-bullet.png" type="image/x-icon">

    <!-- Canonical -->
    <link rel="canonical" href="http://localhost:4000/xtext/2016/01/12/code-coverage-for-xtend.html">

    <!-- RSS -->
    <link rel="alternate" type="application/atom+xml" title="Xtext and more" href="http://localhost:4000///feed.xml"/>

    <!-- Font Awesome -->
    <!-- <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"> -->
    <link rel="stylesheet" type="text/css" href="/assets/css/font-awesome.min.css">

    <!-- Google Fonts -->
    
    <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic" rel="stylesheet" type="text/css"> 
    

    <!-- KaTeX 0.8.3 -->
    

    <!-- Google Analytics -->
    
    
    <!-- seo tags -->
    <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Code Coverage for Xtend | Xtext and more</title>
<meta name="generator" content="Jekyll v3.8.1" />
<meta property="og:title" content="Code Coverage for Xtend" />
<meta name="author" content="Christian Dietrich" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This is a short blog on how to do code coverage reports with Xtend. Imagine you have some nice Xtend Code like this one package demo class Demo { def doSomething() { return 1 } def doSomethingElse() { return 2 } }" />
<meta property="og:description" content="This is a short blog on how to do code coverage reports with Xtend. Imagine you have some nice Xtend Code like this one package demo class Demo { def doSomething() { return 1 } def doSomethingElse() { return 2 } }" />
<link rel="canonical" href="http://localhost:4000/xtext/2016/01/12/code-coverage-for-xtend.html" />
<meta property="og:url" content="http://localhost:4000/xtext/2016/01/12/code-coverage-for-xtend.html" />
<meta property="og:site_name" content="Xtext and more" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-01-12T23:00:27+01:00" />
<script type="application/ld+json">
{"description":"This is a short blog on how to do code coverage reports with Xtend. Imagine you have some nice Xtend Code like this one package demo class Demo { def doSomething() { return 1 } def doSomethingElse() { return 2 } }","author":{"@type":"Person","name":"Christian Dietrich"},"@type":"BlogPosting","url":"http://localhost:4000/xtext/2016/01/12/code-coverage-for-xtend.html","headline":"Code Coverage for Xtend","dateModified":"2016-01-12T23:00:27+01:00","datePublished":"2016-01-12T23:00:27+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/xtext/2016/01/12/code-coverage-for-xtend.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <!-- Manual seo tags -->
    <!--
    <title>Code Coverage for Xtend | Xtext and more</title>
    <meta name="description" content="This is a short blog on how to do code coverage reports with Xtend.Imagine you have some nice Xtend Code like this onepackage demo class Demo {     def doSom...">
    -->
</head>

  <body>
    <header class="site-header">
    
    <!-- Logo and title -->
	<div class="branding">
		<a href="/">
			<img class="avatar" src="/assets/img/xtext-bullet.png" alt=""/>
		</a>

		<h1 class="site-title">
			<a href="/">Xtext and more</a>
		</h1>
	</div>
    
    <!-- Toggle menu -->
    <nav class="clear">
    <a id="pull" class="toggle" href="#">
    <i class="fa fa-bars fa-lg"></i>
    </a>
    
    <!-- Menu -->
    <ul>
        
        
        
        
        <li class="separator">
            |
        </li>
        <li>
            <a class="clear" href="/about/">
                Impressum
            </a>
        </li>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
         
        
        
        <li class="separator">
            |
        </li>
        <li>
            <a class="clear" href="http://localhost:4000/search">
                <i class="fa fa-search" aria-hidden="true"></i>
            </a>
        </li>
        
        
        <li class="separator">
            |
        </li>
        <li>
            <a class="clear" href="http://localhost:4000/tags">
                <i class="fa fa-tags" aria-hidden="true"></i>
            </a>
        </li>
        
        
    </ul>
        
	</nav>
</header>

    <div class="content">
      <article >
  <header id="main" style="background-image: url('/')">
    <h1 id="Code+Coverage+for+Xtend" class="title">Code Coverage for Xtend</h1>
    <p class="meta">
    January 12, 2016
     - Christian Dietrich
    </p>
  </header>
  <section class="post-content"><p>This is a short blog on how to do code coverage reports with Xtend.
Imagine you have some nice Xtend Code like this one</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">demo</span>
 
<span class="n">class</span> <span class="n">Demo</span> <span class="p">{</span>
 
    <span class="n">def</span> <span class="n">doSomething</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">return</span> <span class="m">1</span>
    <span class="p">}</span>
 
    <span class="n">def</span> <span class="n">doSomethingElse</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">return</span> <span class="m">2</span>
    <span class="p">}</span>
 
<span class="p">}</span>
</code></pre></div></div>

<p>wouldnâ€™t it be nice to have code coverage like</p>

<p><img src="http://localhost:4000/assets/img/blog/bildschirmfoto-2016-01-12-um-23-57-44.png" alt="Coverage" /></p>

<p>Using the xtend-maven-plugin in version 2.9.0+ this works more or less out of the box</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;plugin&gt;
    &lt;groupId&gt;org.eclipse.xtend&lt;/groupId&gt;
    &lt;artifactId&gt;xtend-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;2.9.0&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;goals&gt;
                &lt;goal&gt;compile&lt;/goal&gt;
                &lt;goal&gt;testCompile&lt;/goal&gt;
                &lt;goal&gt;xtend-install-debug-info&lt;/goal&gt;
                &lt;goal&gt;xtend-test-install-debug-info&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
                &lt;xtendAsPrimaryDebugSource&gt;true&lt;/xtendAsPrimaryDebugSource&gt;
                &lt;outputDirectory&gt;${project.build.directory}/xtend-gen/main&lt;/outputDirectory&gt;
                &lt;testOutputDirectory&gt;${project.build.directory}/xtend-gen/test&lt;/testOutputDirectory&gt;
                &lt;writeTraceFiles&gt;true&lt;/writeTraceFiles&gt;
            &lt;/configuration&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;
</code></pre></div></div>

<p>The interesting - new - parts are the goals xtend-install-debug-info and xtend-test-install-debug-info as well as the configuration xtendAsPrimaryDebugSource.</p>

<p>Here is my complete sample pom</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;groupId&gt;demo&lt;/groupId&gt;
    &lt;artifactId&gt;demo&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;
    &lt;build&gt;
        &lt;plugins&gt;
 
 
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
                &lt;configuration&gt;
                    &lt;compilerId&gt;eclipse&lt;/compilerId&gt;
                    &lt;source&gt;1.8&lt;/source&gt;
                    &lt;target&gt;1.8&lt;/target&gt;
                    &lt;optimize&gt;true&lt;/optimize&gt;
 
                &lt;/configuration&gt;
                &lt;dependencies&gt;
                    &lt;dependency&gt;
                        &lt;groupId&gt;org.codehaus.plexus&lt;/groupId&gt;
                        &lt;artifactId&gt;plexus-compiler-eclipse&lt;/artifactId&gt;
                        &lt;version&gt;2.6&lt;/version&gt;
                        &lt;scope&gt;runtime&lt;/scope&gt;
                    &lt;/dependency&gt;
                &lt;/dependencies&gt;
            &lt;/plugin&gt;
 
 
            &lt;plugin&gt;
                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;
                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;0.7.5.201505241946&lt;/version&gt;
 
 
                &lt;executions&gt;
                    &lt;!-- Prepares the property pointing to the JaCoCo runtime agent which 
                        is passed as VM argument when Maven the Surefire plugin is executed. --&gt;
                    &lt;execution&gt;
                        &lt;id&gt;pre-unit-test&lt;/id&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;prepare-agent&lt;/goal&gt;
                        &lt;/goals&gt;
                        &lt;configuration&gt;
                            &lt;!-- Sets the path to the file which contains the execution data. --&gt;
                            &lt;destFile&gt;${project.build.directory}/coverage-reports/jacoco-ut.exec&lt;/destFile&gt;
                            &lt;!-- Sets the name of the property containing the settings for JaCoCo 
                                runtime agent. --&gt;
                            &lt;propertyName&gt;surefireArgLine&lt;/propertyName&gt;
 
                        &lt;/configuration&gt;
                    &lt;/execution&gt;
                    &lt;!-- Ensures that the code coverage report for unit tests is created 
                        after unit tests have been run. --&gt;
                    &lt;execution&gt;
                        &lt;id&gt;post-unit-test&lt;/id&gt;
                        &lt;phase&gt;test&lt;/phase&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;report&lt;/goal&gt;
                        &lt;/goals&gt;
                        &lt;configuration&gt;
 
                            &lt;!-- Sets the path to the file which contains the execution data. --&gt;
                            &lt;dataFile&gt;${project.build.directory}/coverage-reports/jacoco-ut.exec&lt;/dataFile&gt;
                            &lt;!-- Sets the output directory for the code coverage report. --&gt;
                            &lt;outputDirectory&gt;${project.reporting.outputDirectory}/jacoco-ut&lt;/outputDirectory&gt;
                        &lt;/configuration&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
 
            &lt;/plugin&gt;
 
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
                &lt;version&gt;2.15&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;!-- Sets the VM argument line used when unit tests are run. --&gt;
                    &lt;argLine&gt;${surefireArgLine}&lt;/argLine&gt;
                    &lt;!-- Skips unit tests if the value of skip.unit.tests property is true --&gt;
                    &lt;skipTests&gt;${skip.unit.tests}&lt;/skipTests&gt;
                    &lt;!-- Excludes integration tests when unit tests are run. --&gt;
                    &lt;excludes&gt;
                        &lt;exclude&gt;**/IT*.java&lt;/exclude&gt;
                    &lt;/excludes&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
 
            &lt;plugin&gt;
                &lt;groupId&gt;org.eclipse.xtend&lt;/groupId&gt;
                &lt;artifactId&gt;xtend-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;2.9.0&lt;/version&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;compile&lt;/goal&gt;
                            &lt;goal&gt;testCompile&lt;/goal&gt;
                            &lt;goal&gt;xtend-install-debug-info&lt;/goal&gt;
                            &lt;goal&gt;xtend-test-install-debug-info&lt;/goal&gt;
                        &lt;/goals&gt;
                        &lt;configuration&gt;
                            &lt;xtendAsPrimaryDebugSource&gt;true&lt;/xtendAsPrimaryDebugSource&gt;
                            &lt;outputDirectory&gt;${project.build.directory}/xtend-gen/main&lt;/outputDirectory&gt;
                            &lt;testOutputDirectory&gt;${project.build.directory}/xtend-gen/test&lt;/testOutputDirectory&gt;
                            &lt;writeTraceFiles&gt;true&lt;/writeTraceFiles&gt;
                        &lt;/configuration&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
 
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.eclipse.xtend&lt;/groupId&gt;
            &lt;artifactId&gt;org.eclipse.xtend.lib&lt;/artifactId&gt;
            &lt;version&gt;2.9.0&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;junit&lt;/groupId&gt;
            &lt;artifactId&gt;junit&lt;/artifactId&gt;
            &lt;version&gt;4.11&lt;/version&gt;
        &lt;/dependency&gt;
 
    &lt;/dependencies&gt;
&lt;/project&gt;
</code></pre></div></div>
</section>
   
   <!-- Tag list -->
  
  


<footer>
  <div class="tag-list">
    
      <div class="meta">Tags</div>
    

    
    <a class="button" href="/tags#Coverage">
      <p><i class="fa fa-tag fa-fw"></i> Coverage</p>
    </a>
    
    <a class="button" href="/tags#Xtend">
      <p><i class="fa fa-tag fa-fw"></i> Xtend</p>
    </a>
    
  </div>
</footer>

    
</article>

<!-- Disqus -->


<!-- Post navigation -->

  <div id="post-nav">
  
  <div id="previous-post" class="post-nav-post">
      <p>Previous post</p>
      <a href="/xtext/2015/03/19/xtext-and-strings-as-cross-references.html">
        Xtext and Strings as Cross-References
      </a>
  </div>
  
  
</div>

    </div>
    
<footer class="site-footer">
    <p class="text">Powered by <a href="https://jekyllrb.com/">Jekyll</a> with <a href="https://github.com/sylhare/Type-on-Strap">Type on Strap</a>
</p>
            <div class="footer-icons">
                <ul>
                <!-- Social icons from Font Awesome, if enabled -->
                
<li>
	<a href="http://localhost:4000/feed.xml" title="Follow RSS feed">
		<span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
        </span>
	</a>
</li>















<li>
	<a href="https://github.com/cdietrich" title="Follow on GitHub">
		<span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-github fa-stack-1x fa-inverse"></i>
        </span>
	</a>
</li>

























<li>
	<a href="https://twitter.com/chrdietrich" title="Follow on Twitter" class="type">
        <span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
        </span>
	</a>
</li>








                </ul>
            </div>
</footer>




  </body>
</html>
